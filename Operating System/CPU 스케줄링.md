# CPU 스케줄링
> Ready Queue 에 있는 프로세스들을 스케줄링한다.

<br><br><br>

## 비선점 스케줄링
```
한 프로세스가 자원을 할당받았을 때, 다른 프로세스가 해당 자원을 뺏을 수 없는 경우의 스케줄링.
```
- 모든 프로세스를 공정하게 관리한다.
- 일괄처리 방식에 적합하며, 대기 중인 프로세스는 영향을 받지 않음으로 응답시간을 예측하기 쉽다.
- 하나의 프로세스가 장시간 CPU 를 독점할 수 있다.
<br><br>

### 1. FCFS (First Come First Served)
먼저 온 순서대로 처리되는 FIFO 방식의 스케줄링이다. 할당되었던 CPU 가 반환될 때만 스케줄링이 이루어지며, 소요시간이 긴 프로세스가 먼저 도달하면 효율성이 낮아진다.
<br><br>

### 2. SJF (Shortest Job First)
Ready Queue 에 존재하는 프로세스들 중에 실행시간이 가장 짧은 프로세스에게 자원들 할당하는 방법이다. 평균 대기시간이 가장 짧으며, 실행시간이 긴 프로세스의 경우 실행시간이 짧은 프로세스에게 우선순위가 자꾸 밀려 무한대기 상태가 발생할 수 있다.
<br><br>

### 3. HRN (Hightest Response-Ratio Next)
SJF 의 단점을 보안하기 위해서 등장하였다. 긴 작업과 짧은 작업간의 지나친 불평등을 어느정도 보완한 기법. 즉, 실행시간과 대기시간을 모두 고려해 우선순위를 정한다. `우선순위 = (대기시간 + 실행시간) / 실행시간`
<br><br>

### 4. 비선점형 우선순위
우선순위가 가장 높은 프로세스에게 CPU 를 할당하는 스케줄링이다. 숫자가 작을수록 우선순위가 높으며, 비선점형 방식은 더 높은 우선순위의 프로세스가 도착하면 Ready Queue 의 Head 에 넣는다. 우선순위가 낮은 프로세스의 경우 기아상태 가 일어날 수 있다. 따라서 Aging 기법을 통해 대기시간에 맞춰 우선순위를 높혀준다.
<br><br><br><br><br><br>

## 선점 스케줄링
```
현재 실행중인 프로세스를 인터럽트 할 수 있거나 Ready 상태로 이동시킬 수 있는 경우의 스케줄링.
```
- 프로세스가 장시간 CPU 를 독점하는 것을 방지한다.
- 실시간, 대화식 시분할 시스템에 사용한다.
- 우선 순위가 높은 프로세스를 빠르게 처리해야할 경우 유용하다.
- 선점이 일어날 경우, 오버헤드가 발생하며 처리시간을 예측하기 힘들다.
<br><br>

### 1. SRT (Shortest Remaining Time First)
현재 수행중인 프로세스의 남은 처리 시간보다 더 짧은 실행시간을 갖는 프로세스가 Ready Queue 에 들어오면, 해당 프로세스가 CPU 를 선점한다. 소요시간이 긴 프로세스가 먼저 도착하면 효율성이 낮아진다. SRT 는 새로운 프로세스가 도착할 때 마다 스케줄링이 이루어지기 때문에, 운영체제는 프로세스의 종료 시간을 예측하기 어려워진다.
<br><br>

### 2. 선점형 우선순위
기본적인 우선순위 방식은 동일하지만, 선점형 우선순위 스케줄링에선 더 높은 우선순위의 프로세스가 도착하면, 실행중인 프로세스를 멈추고 CPU 를 선점한다.
<br><br>

### 3. Round Robin
각 프로세스는 동일한 시간의 CPU 시간(time quantum) 을 할당받고, 선입선출에 의해 작업이 처리된다. 할당시간이 너무 크면 FCFS 와 같아지고, 너무 작아지면 오버헤드가 커진다. 

Round Robin 은 CPU 사용시간이 랜덤한 프로세스들이 섞여있을 경우에 효율적이다. (n 개의 프로세스의 할당시간이 q 인 경우, 어떤 프로세스도 (n-1) * q 의 시간이상 기다리지 않기 때문)

Round Robin 이 가능한 이유는 프로세스의 Context 를 저장할 수 있기 때문이다.
<br><br>

### 4. 다단계 큐 & 다단계 피드백 큐 스케줄링
![](https://images.velog.io/images/sangwoo24/post/8ef195e8-1205-455a-b7ec-bb74ccd37dd2/%EC%8A%A4%ED%81%AC%EB%A6%B0%EC%83%B7%202021-05-16%20%EC%98%A4%EC%A0%84%202.15.03.png)
<br><br>

##### 4-1 다단계 큐 스케줄링
프로세스의 우선순위에 따라 시스템 프로세스, 대화형 프로세스, 일괄처리 프로세스 등으로 나누어 Ready Queue 를 상위, 중위, 하위 단계로 배치한다. 다단계 큐 스케줄링은 Ready Queue 를 여러 개 사용하는 기법이다. 각각의 Queue 는 자신의 스케줄링 알고리즘을 수행하며, Queue 와 Queue 사이에도 우선순위를 부여한다.
<br><br>

##### 4-1 다단계 피드백 큐 스케줄링
다단계 큐의 단점을 보완한 방식의 스케줄링이다. Queue 마다 Timeout 을 설정하여, Timeout 초과시 우선순위가 낮은 다음단계 큐로 이동한다.
